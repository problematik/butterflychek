'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Picker=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{initialValue:3,valueSetterElement:null};_classCallCheck(this,a),this.VALUE_CHANGED='VALUE_CHANGED',c.initialValue=c.hasOwnProperty('initialValue')?c.initialValue:3,c.valueSetterElement=c.valueSetterElement||null,this.el=$(b),null===c.valueSetterElement&&(c.valueSetterElement=b),this.setter=$(c.valueSetterElement),this.value=c.initialValue,this.el.find('.item').on('click',this.setValue.bind(this)),this.setterElementAddValueClass()}return _createClass(a,[{key:'setValue',value:function setValue(b){this.setterElementRemoveValueClass(),this.value=$(b.currentTarget).data('value'),this.setterElementAddValueClass(),this.el.emit(this.VALUE_CHANGED)}},{key:'on',value:function on(b,c){this.el.on(b,c)}},{key:'setterElementRemoveValueClass',value:function setterElementRemoveValueClass(){this.setter.removeClass('is-'+this.value)}},{key:'setterElementAddValueClass',value:function setterElementAddValueClass(){null!==this.value&&this.setter.addClass('is-'+this.value)}}]),a}(),Overall=function(){function a(){var b=this;_classCallCheck(this,a),this.el=$('.overall .scores'),this.score=function(){var c=document.location.search.match(/v=(\d)/);return c=null===c?3:parseInt(c[1],10),5<c?3:0>c?3:c}(),this.state='selected',this.el.find('.state span').on('click',this.selecting.bind(this)),this.el.find('.state svg').on('click',this.selecting.bind(this)),this.picker=new Picker($('.overall .items-wrapper'),{valueSetterElement:this.el,initialValue:this.score}),this.picker.on(this.picker.VALUE_CHANGED,function(){b.score=b.picker.value,b.selected()})}return _createClass(a,[{key:'selected',value:function selected(){this.toggleSelectionClasses()}},{key:'selecting',value:function selecting(){this.toggleSelectionClasses()}},{key:'toggleSelectionClasses',value:function toggleSelectionClasses(){this.el.toggleClass('selected selecting')}}]),a}(),Question=function(){function a(b){var c=this;_classCallCheck(this,a),this.VALUE_SET='VALUE_SET',this.el=$(b),this.pickerEl=this.el.find('.picker'),this.input=this.el.find('input[name^=question]'),this.el.find('.comment a').on('click',this.commentClicked.bind(this)),this.value=null,this.picker=new Picker(this.pickerEl,{initialValue:null}),this.picker.on(this.picker.VALUE_CHANGED,function(){c.value=c.picker.value,c.setInputValue(),c.el.emit(c.VALUE_SET)})}return _createClass(a,[{key:'setInputValue',value:function setInputValue(){this.input.val(this.value)}},{key:'commentClicked',value:function commentClicked(b){b.preventDefault(),this.pickerEl.addClass('comment-activated')}},{key:'onValueSet',value:function onValueSet(b){this.el.on(this.VALUE_SET,b)}}]),a}(),App=function(){function a(){var b=this;_classCallCheck(this,a),this.overall=new Overall,this.questions=[],$('.question').each(function(c){var d=new Question(c);b.questions.push(d),d.onValueSet(b.questionValueSet.bind(b))}),this.submitEnabled=!1,this.submit=$('form button[type=submit]')}return _createClass(a,[{key:'questionValueSet',value:function questionValueSet(){if(!this.submitEnabled){var b=!0;this.questions.forEach(function(c){null===c.value&&(b=!1)}),b&&(this.submitEnabled=!0,this.submit.removeAttr('disabled'))}}}]),a}(),app=new App;
